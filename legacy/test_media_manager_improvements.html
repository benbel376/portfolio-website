<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Manager - Lazy Loading Test</title>

    <!-- Ionicons -->
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

    <!-- Media Manager Styles -->
    <link rel="stylesheet" href="assets/css/control/media_manager/media_manager_style_v1.css">

    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f5f5;
        }
        
        .test-header {
            background: linear-gradient(135deg, #FF8F00 0%, #FF3A00 100%);
            color: white;
            padding: 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .test-info {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .test-info h3 {
            margin: 0 0 10px 0;
            color: #FF8F00;
        }
        
        .improvements-list {
            list-style: none;
            padding: 0;
        }
        
        .improvements-list li {
            padding: 8px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .improvements-list li:last-child {
            border-bottom: none;
        }
        
        .improvements-list ion-icon {
            color: #4CAF50;
            font-size: 18px;
        }
        
        .lazy-highlight {
            background: linear-gradient(135deg, #FFE0B2 0%, #FFCC80 100%);
            padding: 15px;
            border-radius: 12px;
            margin: 10px 0;
            border-left: 4px solid #FF8F00;
        }
        
        .lazy-highlight strong {
            color: #E65100;
        }
    </style>
</head>

<body>
    <div class="test-header">
        <h1>ðŸš€ Media Manager - Lazy Loading Implementation</h1>
        <p>Performance-optimized with on-demand group loading</p>
    </div>

    <div class="test-info">
        <h3>âœ¨ Enhanced with Lazy Loading</h3>

        <div class="lazy-highlight">
            <strong>ðŸ”¥ New:</strong> Only the first page-component group loads initially. Other groups load when you click on them in the navigation!
        </div>

        <ul class="improvements-list">
            <li>
                <ion-icon name="flash-outline"></ion-icon>
                <strong>Lazy Loading:</strong> Groups load on-demand for better performance
            </li>
            <li>
                <ion-icon name="grid-outline"></ion-icon>
                <strong>Fixed 3-Column Grid:</strong> No more cramped auto-fill layout
            </li>
            <li>
                <ion-icon name="resize-outline"></ion-icon>
                <strong>Proper Aspect Ratios:</strong> Thumbnails maintain 4:3 ratio without squashing
            </li>
            <li>
                <ion-icon name="folder-outline"></ion-icon>
                <strong>Smart Navigation:</strong> Visual indicators show loaded vs lazy groups
            </li>
            <li>
                <ion-icon name="phone-portrait-outline"></ion-icon>
                <strong>Modal Alignment:</strong> Fixed content alignment in image detail modal
            </li>
            <li>
                <ion-icon name="scroll-outline"></ion-icon>
                <strong>Scrollable Layout:</strong> Grid scrolls smoothly instead of being squashed
            </li>
            <li>
                <ion-icon name="color-palette-outline"></ion-icon>
                <strong>Enhanced Visuals:</strong> Better loading states, animations, and polish
            </li>
        </ul>

        <div class="lazy-highlight">
            <strong>ðŸ’¡ How to test:</strong> Notice how groups marked with "lazy" take a moment to load when clicked. This saves bandwidth and improves initial load time!
        </div>
    </div>

    <!-- Media Manager Component -->
    <div id="media-manager-component" class="control-media-manager-section">
        <div class="control-media-manager-container">

            <!-- Header -->
            <div class="control-media-manager-header">
                <div class="control-media-manager-title-area">
                    <h3 class="control-media-manager-title">
                        <ion-icon name="images-outline"></ion-icon>
                        Media Manager
                    </h3>
                    <div class="current-group-info">
                        <span id="currentGroupName">No group selected</span>
                        <span id="currentGroupCount" class="group-file-count">0 files</span>
                    </div>
                </div>
                <div class="control-media-manager-actions">
                    <button id="openFiltersBtn" class="control-media-manager-filters-btn">
                        <ion-icon name="options-outline"></ion-icon>
                        Filters & Settings
                    </button>
                    <button id="uploadMediaBtn" class="control-media-manager-upload-btn">
                        <ion-icon name="cloud-upload-outline"></ion-icon>
                        Upload
                    </button>
                </div>
            </div>

            <!-- Main Content -->
            <div class="control-media-manager-main">
                <div class="control-media-manager-content">
                    <div id="mediaGrid" class="control-media-manager-grid">
                        <!-- Media items will be loaded here dynamically -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Global Functions for Authentication -->
    <script>
        // Mock authentication state for testing
        function getGlobalAuthState() {
            return {
                isAuthenticated: true,
                token: null // Using session auth for this test
            };
        }

        // Mock session authentication
        document.cookie = "PHPSESSID=test-session";

        console.log('ðŸ§ª Lazy Loading Test - Media Manager will load first group only, then lazy load others on click');
    </script>

    <!-- Media Manager Behavior -->
    <script src="assets/js/control/media_manager/media_manager_behavior_v1.js"></script>
</body>

</html>